<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ARTIGLIERIA</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Permanent+Marker&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
    --width:1000px
}
      html,
      body {
        margin: 0;
        padding: 0;
        overflow-x: hidden;
      }
      body {
        background: #f5f5f7;
        color: #1d1d1f;
        font: 16px/1.4 Helvetica, Arial, sans-serif;
        position: relative;
      }

      /* Main layout */
      @media (min-width: 769px) {
        .sidebar {
          position: fixed;
          left: 0;
          top: 0;
          width: 15vw;
          height: 100vh;
          background: rgba(245, 245, 247, 0.95);
          backdrop-filter: blur(10px);
          display: flex;
          flex-direction: column;
          justify-content: space-between;
          padding: 20px 0px;
          box-sizing: border-box;
          z-index: 1000;
          opacity: 0;
          transition: opacity 0.3s ease;
        }

        .main-content {
          min-height: 100vh;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          position: relative;
          left: calc(-15vw / 2);
        }

        .content-wrapper {
          margin-left: 15vw;
          width: 85vw;
          max-width: 85vw;
        }

        .nav-header {
          display: none;
        }

        .hero-svg {
          width: 100%;
          max-width: 400px;
          height: auto;
          display: block;
        }
      }

      /* Mobile layout */
      @media (max-width: 768px) {
        .sidebar {
          display: none;
        }

        .main-content {
          width: 100vw;
          min-height: 100svh;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
        }

        .hero-svg {
          width: 100%;
          max-width: 720px;
          height: auto;
          display: block;
        }

        /* Mobile Navigation Header */
        .nav-header {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          background: rgba(245, 245, 247, 0.95);
          backdrop-filter: blur(10px);
          padding: 12px 20px;
          z-index: 1000;
          transform: translateY(-100%);
          transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          border-bottom: 1px solid rgba(29, 29, 31, 0.1);
          display: flex;
          align-items: center;
          justify-content: space-between;
        }

        .nav-header.visible {
          transform: translateY(0);
        }

        .nav-logo-mobile {
          height: 40px;
          width: auto;
        }

        .nav-toggle {
          display: block;
          background: none;
          border: none;
          color: #1d1d1f;
          font-size: 24px;
          cursor: pointer;
          padding: 5px;
          z-index: 10000;
          position: relative;
        }

        .nav-menu-mobile {
          position: fixed;
          top: 0;
          left: 0;
          width: 100vw;
          height: 100vh;
          background: #f5f5f7;
          flex-direction: column;
          gap: 0;
          padding: 80px 30px 30px 30px;
          transform: translateX(-100%);
          opacity: 1;
          visibility: visible;
          transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
          z-index: 9999;
          justify-content: flex-start;
          align-items: stretch;
          text-align: right;
          display: flex;
          list-style: none;
          margin: 0;
        }

        .nav-menu-mobile.open {
          transform: translateX(0);
        }

        .nav-menu-mobile li {
          padding: 20px 0;
          border-bottom: 1px solid #1d1d1f;
          margin: 0;
        }

        .nav-menu-mobile li:last-child {
          border-bottom: 1px solid #1d1d1f;
        }

        .nav-menu-mobile a {
          font-size: 18px;
          font-weight: 600;
          color: #1d1d1f;
          display: block;
          width: 100%;
          text-align: left;
          text-decoration: none;
          text-transform: lowercase;
          letter-spacing: 0.5px;
        }

        .nav-menu-mobile a:hover {
          color: #000000;
        }

        .nav-close {
          position: absolute;
          top: 20px;
          left: 30px;
          background: none;
          border: none;
          color: #1d1d1f;
          font-size: 24px;
          cursor: pointer;
          z-index: 10001;
          padding: 5px;
          display: block;
        }

        .nav-close:hover {
          color: #000000;
        }
      }

      /* Sidebar styles for desktop */
      .logo-container {
        display: flex;
        justify-content: center;
        align-items: flex-start;
        height: auto;
      }

      .sidebar-address {
        position: absolute;
        bottom: 20px;
        left: 0;
        right: 0;
        text-align: center;
        font-size: 11px;
        color: #1d1d1f;
        opacity: 0.7;
        padding: 0 10px;
        line-height: 1.3;
      }

      .logo-container a {
        display: block;
        cursor: pointer;
      }

      .sidebar-logo {
        height: 60px;
        width: auto;
        max-width: 100%;
        pointer-events: none;
      }

      .nav-menu-sidebar {
        list-style: none;
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: column;
        gap: 0px;
        text-align: right;
        margin-top: 20px;
        border-right: 1px solid black;
        padding-right: 20px;
      }

      .nav-menu-sidebar li {
        margin: 0;
      }
      .nav-menu-sidebar li:last-child a {
        margin-bottom: 0;
      }

      .nav-menu-sidebar a {
        color: #1d1d1f;
        text-decoration: none;
        font-size: 18px;
        font-weight: 500;
        text-transform: lowercase;
        letter-spacing: 0.5px;
        display: block;
        padding: 2px 0;
        transition: color 0.3s ease;
      }

      .nav-menu-sidebar a:hover {
        color: #000000;
      }

      /* Home taglines */
      .home-taglines {
        margin-top: 40px;
      }

      /* Desktop layout for taglines */
      @media (min-width: 769px) {
        .home-taglines {
          display: flex;
          gap: 30px;
          justify-content: center;
          align-items: flex-end;
        }

        .tagline {
          font-size: 30px;
          color: #1d1d1f;
          font-weight: 200;
          letter-spacing: 0.5px;
        }
      }

      /* Mobile layout for taglines */
      @media (max-width: 768px) {
        .home-taglines {
          display: flex;
          flex-direction: row;
          align-items: flex-end;
          text-align: right;
          gap: 8px;
        }

        .tagline {
          font-size: 16px;
          color: #1d1d1f;
          font-weight: 400;
          letter-spacing: 0.5px;
        }
      }

      /* Ink Trail */

      .blend-root {
        position: relative;
        background: #f5f5f7;
        isolation: isolate;
        min-height: 100vh;
      }
      .ink-trail-container {
        position: fixed;
        top: 0;
        right: 0;
        width: 100px;
        height: 100vh;
        pointer-events: none;
        z-index: 9999;
      }
      .ink-trail-svg {
        width: 100%;
        height: 100%;
      }

      #inkTrailPath {
        /* Put the blend on the PATH for Safari/WebKit */
        stroke: #1d1d1f;
        stroke-width: 2;
        fill: none;
        opacity: 1;
      }
      /* Base Section */
      .base-section {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        margin:20px;
        border-top: 1px solid #1d1d1f;
        box-sizing: border-box;
        background: #f5f5f7;
      }

      /* About Us Section */

      .about-content {
        max-width: var(--width);
        text-align: left;
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        height: 80vh;
        justify-content: center;
        position: relative;
      }

      .about-content h2 {
        font-size: 2rem;
        margin: 0 0 30px 0;
        font-weight: 700;
        color: #1d1d1f;
        letter-spacing: 1px;
        text-align: right;
      }

      .about-text {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
        margin-bottom: 40px;
      }

      .about-intro {
        font-size: 1rem;
        line-height: 1.6;
        color: #1d1d1f;
        margin: 0 0 20px 0;
      }

      .about-more {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.5s ease-in-out;
      }

      .about-more.expanded {
        max-height: 500px;
      }

      .about-more p {
        font-size: 1rem;
        line-height: 1.6;
        color: #1d1d1f;
        margin: 15px 0;
        opacity: 0.9;
      }

      .read-more-btn {
        background: none;
        color: #1d1d1f;
        border: 2px solid #1d1d1f;
        padding: 12px 24px;
        font-size: 16px;
        font-weight: bold;
        text-transform: lowercase;
        letter-spacing: 0.5px;
        cursor: pointer;
        transition: all 0.3s ease;
        align-self: center;
      }

      .read-more-btn:hover {
        background: #1d1d1f;
        color: #f5f5f7;
      }

      .spazio-content {
        max-width: 1000px;
        text-align: center;
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        height: 100%;
        justify-content: center;
        position: relative;
      }

      .spazio-content h2 {
        font-size: 2rem;
        margin: 0;
        font-weight: 700;
        color: #1d1d1f;
        letter-spacing: 1px;
        text-align: right;
      }

      .subsection {
        margin: 0 0 30px 0;
        font-size: 2rem;
        font-weight: 700;
        color: #1d1d1f;
        letter-spacing: 0.5px;
        text-align: right;
      }

      .carousel-container {
        flex: 1;
        position: relative;
        width: 100%;
        max-width: var(--width);
        display: flex;
        align-items: center;
        gap: 20px;
      }

      .carousel-wrapper {
        flex: 1;
        overflow: hidden;
      }

      .carousel-track {
        display: flex;
        transition: transform 0.4s ease;
      }

      .carousel-slide {
        flex: 0 0 50%;
        padding: 0 5px;
      }

      .carousel-image {
        width: 100%;
        height: 350px;
        object-fit: cover;
      }

      .carousel-arrow {
        background: none;
        color: #1d1d1f;
        border: none;
        height: 80px;
        font-size: 40px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: color 0.3s ease;
        flex-shrink: 0;
      }

      .carousel-arrow:hover {
        color: #000000;
      }

      .carousel-arrow:disabled {
        opacity: 0;
        cursor: not-allowed;
      }

      .spazio-text {
        margin-top: 40px;
        max-width: var(--width);
      }

      .spazio-intro {
        font-size: 1rem;
        line-height: 1.6;
        color: #1d1d1f;
        margin: 0;
        text-align: left;
      }

      /* Podcast Section */
      .podcast-content {
        max-width: var(--width);
        text-align: left;
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        height: 80vh;
        justify-content: center;
        position: relative;
      }

      .podcast-content h2 {
        font-size: 2rem;
        margin: 0 0 30px 0;
        font-weight: 700;
        color: #1d1d1f;
        letter-spacing: 1px;
        text-align: right;
      }

      .podcast-text {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
        margin-bottom: 40px;
      }

      .podcast-intro {
        font-size: 1rem;
        line-height: 1.6;
        color: #1d1d1f;
        margin: 0 0 20px 0;
      }

      .podcast-btn {
        background: none;
        color: #1d1d1f;
        padding: 12px 24px;
        font-size: 16px;
        border: 2px solid #1d1d1f;
        font-weight: bold;
        text-transform: lowercase;
        letter-spacing: 0.5px;
        cursor: pointer;
        transition: all 0.3s ease;
        align-self: center;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 8px;
      }

      .podcast-btn:hover {
        background: #1d1d1f;
        color: #f5f5f7;
      }

      .podcast-btn:hover .substack-icon {
        color: #f5f5f7;
      }

      .substack-icon {
        width: 16px;
        height: 16px;
        transition: color 0.3s ease;
      }

      /* News Section */
      .news-content {
        max-width: var(--width);
        text-align: left;
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        width: 100%;
        height: 80vh;
        justify-content: center;
        position: relative;
      }

      .news-content h2 {
        font-size: 2rem;
        margin: 0 0 30px 0;
        font-weight: 700;
        color: #1d1d1f;
        letter-spacing: 1px;
        text-align: right;
      }

      .news-text {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
        margin-bottom: 40px;
        width: 100%;
      }

      .news-intro {
        font-size: 1rem;
        line-height: 1.6;
        color: #1d1d1f;
        margin: 0 0 20px 0;
        text-align: center;
      }

      .news-btn {
        background: none;
        color: #1d1d1f;
        padding: 12px 24px;
        font-size: 16px;
        border: 2px solid #1d1d1f;
        font-weight: bold;
        text-transform: lowercase;
        letter-spacing: 0.5px;
        cursor: pointer;
        transition: all 0.3s ease;
        align-self: center;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 8px;
      }

      .news-btn:hover {
        background: #1d1d1f;
        color: #f5f5f7;
      }

      .news-btn:hover .linktree-icon {
        color: #f5f5f7;
      }

      .linktree-icon {
        width: 16px;
        height: 16px;
        transition: color 0.3s ease;
      }

      /* Contatti Section */
      .contatti-content {
        max-width: var(--width);
        text-align: left;
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        height: 80vh;
        width: 100%;
        justify-content: center;
        position: relative;
      }

      @media (min-width: 769px) {
        .contatti-section {
          position: relative;
          left: calc(-15vw / 2);
          width: 100vw;
          margin-left: calc(-15vw / 2);
        }
      }

      .contatti-content h2 {
        font-size: 2rem;
        margin: 0 0 40px 0;
        font-weight: 700;
        color: #1d1d1f;
        letter-spacing: 1px;
        text-align: right;
        width: 100%;
      }

      .contatti-wrapper {
        flex: 1;
        display: flex;
        align-items: center;
        gap: 60px;
        width: 100%;
      }

      .contatti-logo {
        width: 60%;
        height: auto;
        flex-shrink: 0;
      }

      .contatti-links {
        display: flex;
        flex-direction: column;
        gap: 20px;
        flex: 1;
      }

      .contact-item {
        display: flex;
        align-items: center;
        gap: 15px;
        color: #1d1d1f;
        text-decoration: none;
        font-size: 16px;
        transition: all 0.3s ease;
        padding: 10px 0;
        border-bottom: 1px solid transparent;
      }

      .contact-item:hover {
        transform: translateX(10px);
        border-bottom: 1px solid #1d1d1f;
      }

      .contact-icon {
        width: 24px;
        height: 24px;
        flex-shrink: 0;
      }

      .contact-item span {
        font-weight: 500;
        letter-spacing: 0.3px;
      }

      /* Archivio Section */
      .archivio-content {
        max-width: 1000px;
        text-align: center;
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        height: 100%;
        margin-top:100px;
        margin-bottom:100px;
        justify-content: center;
        position: relative;
      }

      .archivio-content h2 {
        font-size: 2rem;
        margin: 0 0 30px 0;
        font-weight: 700;
        color: #1d1d1f;
        letter-spacing: 1px;
        text-align: right;
      }

      /* Gallery Grid */
      .archivio-gallery {
        width: 100%;
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        grid-auto-rows: minmax(150px, auto);
        gap: 20px;
        margin-bottom: 40px;
        contain: layout;
      }

      .gallery-item {
        position: relative;
        cursor: pointer;
        overflow: hidden;
        background: #f0f0f0;
        contain: layout paint;
      }

      .gallery-item.portrait {
        grid-row: span 3;
        aspect-ratio: 3/4;
      }

      .gallery-item.landscape {
        aspect-ratio: 16/9;
      }

      .gallery-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }

      .gallery-item:hover {
        cursor: pointer;
      }

      .gallery-caption {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
        color: white;
        padding: 20px 15px 15px;
        font-size: 14px;
        line-height: 1.4;
        display: -webkit-box;
        text-align: justify;
        -webkit-box-orient: vertical;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      /* Modal - Optimized for performance */
      .modal {
        position: fixed;
        top: 0;
        left: 0;
        height: 100%;
        background: rgba(0, 0, 0, 0.95);
        z-index: 10000;
        justify-content: center;
        align-items: center;
        padding: 20px;
        margin-left: 15vw;
        width: 85vw;
        visibility: hidden;
        opacity: 0;
        display: flex;
        contain: layout style paint;
      }

      .modal.active {
        visibility: visible;
        opacity: 1;
      }

      .modal-content {
        max-width: 90vw;
        max-height: 90vh;
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .modal-image {
        max-width: 100%;
        max-height: 70vh;
        object-fit: contain;
        display: block;
      }
      
      .modal-loader {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 50px;
        height: 50px;
        border: 3px solid rgba(255, 255, 255, 0.3);
        border-top-color: white;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        z-index: 1;
      }
      
      @keyframes spin {
        to { transform: translate(-50%, -50%) rotate(360deg); }
      }

      .modal-text {
        color: white;
        margin-top: 20px;
        max-width: 600px;
        text-align: center;
        font-size: 16px;
        line-height: 1.6;
      }

      .modal-close {
        position: absolute;
        top: 20px;
        right: 60px;
        color: white;
        font-size: 40px;
        cursor: pointer;
        background: none;
        border: none;
        z-index: 10001;
        transition: opacity 0.3s;
      }

      .modal-close:hover {
        opacity: 0.7;
      }

      .archivio-text {
        margin-top: 40px;
        max-width: var(--width);
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .archivio-intro {
        font-size: 1rem;
        line-height: 1.6;
        color: #1d1d1f;
        margin: 0;
        text-align: left;
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.5s ease-in-out;
        width: 100%;
      }

      .archivio-intro.expanded {
        max-height: 500px;
        margin-bottom: 20px;
      }

      .archivio-btn {
        background: none;
        color: #1d1d1f;
        border: 2px solid #1d1d1f;
        padding: 12px 24px;
        font-size: 16px;
        font-weight: bold;
        text-transform: lowercase;
        letter-spacing: 0.5px;
        cursor: pointer;
        transition: all 0.3s ease;
        align-self: center;
      }

      .archivio-btn:hover {
        background: #1d1d1f;
        color: #f5f5f7;
      }

      /* Footer Section */
      .footer-section {
        background: #1d1d1f;
        color: #f5f5f7;
        padding: 60px 40px 40px 40px;
        margin-top: 80px;
      }

      @media (min-width: 769px) {
        .footer-section {
          position: relative;
          left: calc(-15vw / 2);
          width: 100vw;
          margin-left: calc(-15vw / 2);
        }
      }

      /* Sidebar hidden state */
      .sidebar.hidden {
        opacity: 0 !important;
        pointer-events: none;
      }

      .footer-content {
        max-width: 1000px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 40px;
      }

      .footer-logo-svg {
        height: 50px;
        width: auto;
        filter: invert(1);
      }

      .footer-info p {
        margin: 5px 0;
        font-size: 14px;
        opacity: 0.8;
      }

      .footer-links {
        display: flex;
        gap: 30px;
      }

      .footer-links a {
        color: #f5f5f7;
        text-decoration: none;
        font-size: 14px;
        text-transform: lowercase;
        letter-spacing: 0.5px;
        transition: opacity 0.3s ease;
      }

      .footer-links a:hover {
        opacity: 0.7;
      }

      /* Mobile adjustments for about section */
      @media (max-width: 768px) {
        .content-wrapper {
          margin-left: 0;
          width: 100vw;
        }

        .about-section {
          padding: 20px;
        }

        .about-content h2 {
          font-size: 2.5rem;
        }

        .about-intro {
          font-size: 1.1rem;
        }

        .about-more p {
          font-size: 0.95rem;
        }

        .spazio-section {
          padding: 20px;
        }

        .spazio-content h2 {
          font-size: 2.5rem;
        }

        .carousel-slide {
          flex: 0 0 100%;
        }

        .carousel-image {
          height: 250px;
        }

        .spazio-intro {
          font-size: 1.1rem;
        }

        .base-section {
          min-height: calc(100vh - 73px);
          padding-top: 93px;
          text-align: justify;
        }

        .ink-trail-container {
          display: none;
        }

        .footer-section {
          padding: 40px 20px 30px 20px;
          margin-top: 40px;
        }

        .footer-content {
          flex-direction: column;
          text-align: center;
          gap: 30px;
        }

        .footer-links {
          gap: 20px;
        }

        .archivio-section {
          padding: 20px;
        }

        .archivio-content h2 {
          font-size: 2.5rem;
        }

        .archivio-gallery {
          grid-template-columns: 1fr;
          gap: 15px;
        }

        .gallery-item.portrait {
          grid-row: span 1;
          aspect-ratio: 3/4;
        }

        .gallery-item.landscape {
          aspect-ratio: 16/9;
        }
        .modal {
          margin-left: 0px;
          width: unset;
        }

        .modal-close {
          top: 70px;
          right: 10px;
          font-size: 30px;
        }

        .archivio-intro {
          font-size: 1.1rem;
        }


        .podcast-content h2 {
          font-size: 2.5rem;
        }

        .podcast-intro {
          font-size: 1.1rem;
        }


        .news-content h2 {
          font-size: 2.5rem;
        }

        .news-intro {
          text-align: left;
          font-size: 1.1rem;
        }

        .contatti-section {
          padding: 20px;
        }

        .contatti-content h2 {
          font-size: 2.5rem;
        }

        .contatti-wrapper {
          flex-direction: column;
          gap: 30px;
        }

        .contatti-logo {
          display: none;
        }

        .contatti-links {
          gap: 15px;
          width: 100%;
        }

        .contact-item {
          font-size: 14px;
        }

        .contact-item:hover {
          transform: translateX(5px);
        }
      }
    </style>
  </head>
  <body>
    <!-- Desktop Sidebar -->
    <aside class="sidebar">
      <div class="logo-container">
        <a href="#home">
          <object
            data="logo.svg"
            type="image/svg+xml"
            class="sidebar-logo"
            id="sidebar_logo"
            aria-label="Sidebar logo"
          ></object>
        </a>
      </div>

      <nav class="nav-menu-sidebar">
        <li><a href="#about">About Us</a></li>
        <li><a href="#spazio">Spazio</a></li>
        <li><a href="#servizi">Servizi</a></li>
        <li><a href="#archivio">Archivio</a></li>
        <li><a href="#podcast">Podcast</a></li>
        <li><a href="#news">eventi</a></li>
        <li><a href="#contatti">Contatti</a></li>
      </nav>
    </aside>

    <!-- Mobile Navigation Header -->
    <header class="nav-header" id="navHeader">
      <a href="#home">
        <object
          data="logo.svg"
          type="image/svg+xml"
          class="nav-logo-mobile"
          id="nav_logo"
          aria-label="Navigation logo"
        ></object>
      </a>

      <!-- Mobile Navigation Menu -->
      <nav class="nav-menu-mobile" id="navMenuMobile">
        <button class="nav-close" id="navClose">✕</button>
        <li><a href="#about">About Us</a></li>
        <li><a href="#spazio">Spazio</a></li>
        <li><a href="#servizi">Servizi</a></li>
        <li><a href="#archivio">Archivio</a></li>
        <li><a href="#podcast">Podcast</a></li>
        <li><a href="#news">eventi</a></li>
        <li><a href="#contatti">Contatti</a></li>
      </nav>

      <!-- Mobile Toggle Button -->
      <button class="nav-toggle" id="navToggle">☰</button>
    </header>
    <div class="blend-root">
      <!-- Ink Trail
      <div class="ink-trail-container">
        <svg class="ink-trail-svg" id="inkTrailSvg">
          <path
            id="inkTrailPath"
            stroke="#1d1d1f"
            stroke-width="2"
            fill="none"
            opacity="1"
            stroke-linecap="round"
            stroke-linejoin="round"
          ></path>
        </svg>
      </div> -->

      <!-- Main Content Area -->
      <main class="content-wrapper">
        <!-- Home Section -->
        <section class="main-content" id="home">
          <object
            data="logo.svg"
            type="image/svg+xml"
            class="hero-svg"
            id="hero_svg"
            aria-label="Hero Logo"
          ></object>
          <div class="home-taglines">
            <span class="tagline">Project Space.</span>
            <span class="tagline">Art Studio.</span>
            <span class="tagline">Cultural Association.</span>
          </div>
        </section>

        <!-- About Us Section -->
        <section class="base-section about-section" id="about">
          <div class="about-content">
            <h2>About Us</h2>
            <div class="about-text">
              <p class="about-intro">
                Artiglieria è un <b>project space</b> attivo dal 2020 che opera
                nella promozione e nella diffusione dell’arte contemporanea,
                attraverso mostre, eventi e progetti artistici orientati alla
                sperimentazione. Come <b>associazione culturale</b>, promuoviamo
                workshop, corsi e attività multidisciplinari, creando
                connessioni tra linguaggi, artistə e pubblici diversi. La nostra
                sede ospita uno <b>studio</b> con postazioni di coworking
                dedicate ad artistə attivə in diversi ambiti artistici, in un
                ambiente condiviso e dinamico.
              </p>

              <div class="about-more" id="aboutMore">
                <p>
                  Duis aute irure dolor in reprehenderit in voluptate velit esse
                  cillum dolore eu fugiat nulla pariatur. Excepteur sint
                  occaecat cupidatat non proident, sunt in culpa qui officia
                  deserunt mollit anim id est laborum.
                </p>
                <p>
                  Sed ut perspiciatis unde omnis iste natus error sit voluptatem
                  accusantium doloremque laudantium, totam rem aperiam, eaque
                  ipsa quae ab illo inventore veritatis et quasi architecto
                  beatae vitae dicta sunt explicabo.
                </p>
                <p>
                  Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut
                  odit aut fugit, sed quia consequuntur magni dolores eos qui
                  ratione voluptatem sequi nesciunt.
                </p>
              </div>
            </div>

            <button class="read-more-btn" id="readMoreBtn">leggi di più</button>
          </div>
        </section>

        <!-- Spazio Section -->
        <section class="base-section spazio-section" id="spazio">
          <div class="spazio-content">
            <h2>Spazio</h2>
            <p class="subsection">/eventi</p>
            <div class="carousel-container">
              <button
                class="carousel-arrow carousel-arrow-left"
                id="carouselLeft"
              >
                ‹
              </button>
              <div class="carousel-wrapper">
                <div class="carousel-track" id="carouselTrack">
                  <div class="carousel-slide">
                    <img
                      src="images/spazio_1.webp"
                      alt="Spazio Image 1"
                      class="carousel-image" loading="lazy"
                    />
                  </div>
                  <div class="carousel-slide">
                    <img
                      src="images/spazio_2.webp"
                      alt="Spazio Image 2"
                      class="carousel-image" loading="lazy"
                    />
                  </div>
                  <div class="carousel-slide">
                    <img
                      src="images/spazio_3.webp"
                      alt="Spazio Image 3"
                      class="carousel-image" loading="lazy"
                    />
                  </div>
                  <div class="carousel-slide">
                    <img
                      src="images/spazio_4.webp"
                      alt="Spazio Image 4"
                      class="carousel-image" loading="lazy"
                    />
                  </div>
                </div>
              </div>
              <button
                class="carousel-arrow carousel-arrow-right"
                id="carouselRight"
              >
                ›
              </button>
            </div>
            <div class="spazio-text">
              <p class="spazio-intro">
                Lo <b>spazio eventi</b> si configura come luogo polifunzionale
                progettato per essere un contenitore di ricerche diverse, capace
                di accogliere molteplici linguaggi espressivi. La sua
                particolarità sta nella versatilità di questo ambiente: uno
                spazio che muta e si reinventa, adattandosi a scenografie,
                rappresentazioni ed opere sempre nuove.
              </p>
            </div>
          </div>
        </section>

        <section class="base-section spazio-section" id="spazio2">
          <div class="spazio-content">
            <h2>Spazio</h2>
            <p class="subsection">/coworking</p>
            <div class="carousel-container">
              <button
                class="carousel-arrow carousel-arrow-left"
                id="coworkingCarouselLeft"
              >
                ‹
              </button>
              <div class="carousel-wrapper">
                <div class="carousel-track" id="coworkingCarouselTrack">
                  <div class="carousel-slide">
                    <img
                      src="images/coworking/1.webp"
                      alt="Spazio Image 1"
                      class="carousel-image" loading="lazy"
                    />
                  </div>
                  <div class="carousel-slide">
                    <img
                      src="images/coworking/2.webp"
                      alt="Spazio Image 2"
                      class="carousel-image" loading="lazy"
                    />
                  </div>
                  <div class="carousel-slide">
                    <img
                      src="images/spazio_3.webp"
                      alt="Spazio Image 3"
                      class="carousel-image" loading="lazy"
                    />
                  </div>
                  <div class="carousel-slide">
                    <img
                      src="images/spazio_4.webp"
                      alt="Spazio Image 4"
                      class="carousel-image" loading="lazy"
                    />
                  </div>
                </div>
              </div>
              <button
                class="carousel-arrow carousel-arrow-right"
                id="coworkingCarouselRight"
              >
                ›
              </button>
            </div>
            <div class="spazio-text">
              <p class="spazio-intro">
                Il <b>coworking</b> ospita circa 12 postazioni di lavoro dedicate a
                diversi ambiti artistici — dalla grafica alla pittura, dalla
                stencil art alla scultura, fino alla fotografia e al video
                making. Le postazioni sono disponibili per affitti di
                medio-lungo periodo, pensate per artistə che desiderano uno
                spazio stabile di ricerca e produzione all’interno di una
                comunità creativa. Lo studio rappresenta un luogo di scambio e
                collaborazione, dove prendono forma progetti e idee che fanno
                crescere la comunità di Artiglieria.
              </p>
            </div>
          </div>
        </section>

        <!-- Archivio Section -->
        <section class="base-section archivio-section" id="archivio">
          <div class="archivio-content">
            <h2>Archivio</h2>
            <div class="archivio-gallery" id="archivioGallery">
              <div class="gallery-item landscape" data-caption="Exhibition opening night showcasing contemporary installations">
                <img src="images/archivio/1.webp" alt="Archivio Image" />
                <div class="gallery-caption">Exhibition opening night showcasing contemporary installations</div>
              </div>
              <div class="gallery-item landscape" data-caption="Collaborative art workshop exploring mixed media techniques">
                <img src="images/archivio/2.webp" alt="Archivio Image" />
                <div class="gallery-caption">Collaborative art workshop exploring mixed media techniques</div>
              </div>
              <div class="gallery-item portrait" data-caption="Solo exhibition featuring sculptural works and experimental forms that challenge traditional boundaries">
                <img src="images/archivio/3por.webp" alt="Archivio Image" />
                <div class="gallery-caption">Solo exhibition featuring sculptural works and experimental forms that challenge traditional boundaries</div>
              </div>
              <div class="gallery-item portrait" data-caption="Performance art piece exploring themes of identity and transformation in contemporary society">
                <img src="images/archivio/4por.webp" alt="Archivio Image" />
                <div class="gallery-caption">Performance art piece exploring themes of identity and transformation in contemporary society</div>
              </div>
              <div class="gallery-item landscape" data-caption="Community event bringing together local artists and residents">
                <img src="images/archivio/5.webp" alt="Archivio Image" />
                <div class="gallery-caption">Community event bringing together local artists and residents</div>
              </div>
              <div class="gallery-item landscape" data-caption="Interactive installation inviting audience participation">
                <img src="images/archivio/6.webp" alt="Archivio Image" />
                <div class="gallery-caption">Interactive installation inviting audience participation</div>
              </div>
              <div class="gallery-item landscape" data-caption="NZIRIA |15-04-2022 | Live dell' artista hard-neomelodic dell' album XXYBRID
lightscapes di B. Peruzzi">
                <img src="images/archivio/7.webp" alt="Archivio Image" />
                <div class="gallery-caption">NZIRIA |15-04-2022 | Live dell' artista hard-neomelodic dell' album XXYBRID
lightscapes di B. Peruzzi</div>
              </div>
              <div class="gallery-item portrait" data-caption="EKI LIGHT IN DIGITAL + MESH POWERED BY MONOGRID | 8-03-2023 |
Lancio della issue 03 di EKI magazine + talk con MONOGRID sul tema della
luce digitale. Per l'occasione Artiglieria ha ospitato MESH spin-off prodotto
da MONOGRID, accompagnata dal Live Coding di Contraddizione.">
                <img src="images/archivio/8por.webp" alt="Archivio Image" />
                <div class="gallery-caption">EKI LIGHT IN DIGITAL + MESH POWERED BY MONOGRID | 8-03-2023 |
Lancio della issue 03 di EKI magazine + talk con MONOGRID sul tema della
luce digitale. Per l'occasione Artiglieria ha ospitato MESH spin-off prodotto
da MONOGRID, accompagnata dal Live Coding di Contraddizione.</div>
              </div>
              <div class="gallery-item landscape" data-caption="EKI LIGHT IN DIGITAL + MESH POWERED BY MONOGRID | 8-03-2023 |
Lancio della issue 03 di EKI magazine + talk con MONOGRID sul tema della
luce digitale. Per l'occasione Artiglieria ha ospitato MESH spin-off prodotto
da MONOGRID, accompagnata dal Live Coding di Contraddizione.">
                <img src="images/archivio/9.webp" alt="Archivio Image" />
                <div class="gallery-caption">EKI LIGHT IN DIGITAL + MESH POWERED BY MONOGRID | 8-03-2023 |
Lancio della issue 03 di EKI magazine + talk con MONOGRID sul tema della
luce digitale. Per l'occasione Artiglieria ha ospitato MESH spin-off prodotto
da MONOGRID, accompagnata dal Live Coding di Contraddizione.</div>
              </div>
              <div class="gallery-item portrait" data-caption="LIVE SOUNDTRACK | 13-04-2024 | Progetto di sonorizzazione
cinematografica/audiovisiva live a cura di Marco Miličevič">
                <img src="images/archivio/10por.webp" alt="Archivio Image" />
                <div class="gallery-caption">LIVE SOUNDTRACK | 13-04-2024 | Progetto di sonorizzazione
cinematografica/audiovisiva live a cura di Marco Miličevič</div>
              </div>
            </div>
            <div class="archivio-text">
              <p class="archivio-intro" id="archivioIntro">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do
                eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut
                enim ad minim veniam, quis nostrud exercitation ullamco laboris
                nisi ut aliquip ex ea commodo consequat.
              </p>
              <button class="archivio-btn" id="archivioBtn">scopri di più</button>
            </div>
          </div>
        </section>

        <!-- Podcast Section -->
        <section class="base-section podcast-section" id="podcast">
          <div class="podcast-content">
            <h2>Podcast</h2>
            <div class="podcast-text">
              <p class="podcast-intro">
                Scopri tutti i contenuti dei talk, live e progetti che ARTiglieria ospita nei propri spazi attraverso il nostro canale podcast e rimani
sempre aggiornatə sulle nostre ultime iniziative.
              </p>
            </div>
            <a href="https://artiglieria.substack.com/podcast/archive?sort=new" target="_blank" class="podcast-btn">
              <svg class="substack-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M22.539 8.242H1.46V5.406h21.08v2.836zM1.46 10.812V24L12 18.11 22.54 24V10.812H1.46zM22.54 0H1.46v2.836h21.08V0z"/>
              </svg>
              canale podcast
            </a>
          </div>
        </section>

        <!-- News Section -->
        <section class="base-section news-section" id="news">
          <div class="news-content">
            <h2>Eventi</h2>
            <div class="news-text">
              <p class="news-intro">
                Per conoscere i prossimi eventi di Artiglieria e le attività in corso visita la pagina dedicata.
              </p>
            </div>
            <a href="https://linktr.ee/artiglieria?fbclid=PAdGRleANvApJleHRuA2FlbQIxMQABp66bMwzb4nBMyF9h9MC983CXyfkhVAGmt7YvdL-X1_fko2E9ujrj8Iz7nRsE_aem_byxiSEdbg3OH_IPa_h10gQ" target="_blank" class="news-btn">
              <svg class="linktree-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="m13.511 5.853 4.005-4.117 2.325 2.381-4.201 4.005h5.909v3.305h-5.937l4.229 4.108-2.325 2.334-5.741-5.769-5.741 5.769-2.325-2.325 4.229-4.108H2V8.122h5.909L3.708 4.117l2.325-2.381 4.005 4.117V0h3.473v5.853zM10.038 16.16h3.473v7.842h-3.473V16.16z"/>
              </svg>
              clicca qui
            </a>
          </div>
        </section>

        <!-- Contatti Section -->
        <section class="base-section contatti-section" id="contatti">
          <div class="contatti-content">
            <h2>Contatti</h2>
            <div class="contatti-wrapper">
              <object
                data="logo.svg"
                type="image/svg+xml"
                class="contatti-logo"
                aria-label="Contatti Logo"
              ></object>
              <div class="contatti-links">
              <a href="https://www.instagram.com/art.iglieria/" target="_blank" class="contact-item">
                <svg class="contact-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zM5.838 12a6.162 6.162 0 1 1 12.324 0 6.162 6.162 0 0 1-12.324 0zM12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm4.965-10.405a1.44 1.44 0 1 1 2.881.001 1.44 1.44 0 0 1-2.881-.001z"/>
                </svg>
                <span>Instagram</span>
              </a>
              <a href="mailto:artiglieriac4@gmail.com" class="contact-item">
                <svg class="contact-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 12.713l-11.985-9.713h23.97l-11.985 9.713zm0 2.574l-12-9.725v15.438h24v-15.438l-12 9.725z"/>
                </svg>
                <span>artiglieriac4@gmail.com</span>
              </a>
              <a href="https://t.me/artiglieriaaps" target="_blank" class="contact-item">
                <svg class="contact-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.446 1.394c-.14.18-.357.295-.6.295-.002 0-.003 0-.005 0l.213-3.054 5.56-5.022c.24-.213-.054-.334-.373-.121l-6.869 4.326-2.96-.924c-.64-.203-.658-.64.135-.954l11.566-4.458c.538-.196 1.006.128.832.941z"/>
                </svg>
                <span>Telegram</span>
              </a>
              <a href="https://form.jotform.com/250121684888363" target="_blank" class="contact-item">
                <svg class="contact-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm0 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0 3c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2zm0 4c-2.67 0-8 1.34-8 4v1h16v-1c0-2.66-5.33-4-8-4z"/>
                </svg>
                <span>Tesseramento Associazione</span>
              </a>
              <a href="https://artiglieria.substack.com/" target="_blank" class="contact-item">
                <svg class="contact-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M22.539 8.242H1.46V5.406h21.08v2.836zM1.46 10.812V24L12 18.11 22.54 24V10.812H1.46zM22.54 0H1.46v2.836h21.08V0z"/>
                </svg>
                <span>Newsletter</span>
              </a>
              <a href="https://maps.app.goo.gl/E4fgQqLrk2dcazV39" target="_blank" class="contact-item">
                <svg class="contact-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 0c-4.198 0-8 3.403-8 7.602 0 4.198 3.469 9.21 8 16.398 4.531-7.188 8-12.2 8-16.398 0-4.199-3.801-7.602-8-7.602zm0 11c-1.657 0-3-1.343-3-3s1.343-3 3-3 3 1.343 3 3-1.343 3-3 3z"/>
                </svg>
                <span>Via Cittadella 4, Firenze</span>
              </a>
            </div>
            
            </div>
          </div>
        </section>

        <!-- Modal -->
        <div class="modal" id="imageModal">
          <button class="modal-close" id="modalClose">&times;</button>
          <div class="modal-content">
            <div class="modal-loader" id="modalLoader"></div>
            <img class="modal-image" id="modalImage" alt="Gallery image" />
            <p class="modal-text" id="modalText"></p>
          </div>
        </div>

        <!-- Footer Section -->
        <footer class="footer-section">
          <div class="footer-content">
            <div class="footer-logo">
              <object
                data="logo.svg"
                type="image/svg+xml"
                class="footer-logo-svg"
                aria-label="Footer Logo"
              ></object>
            </div>
            <div class="footer-info">
              <p>© 2025 Artiglieria. Cultural Association.</p>
              <p>Via Cittadella 4, 50144 Firenze</p>
              <p>Project Space • Art Studio • Community</p>
            </div>
            <div class="footer-links">
              <a href="#about">About</a>
              <a href="#spazio">Spazio</a>
              <a href="#contatti">Contact</a>
            </div>
          </div>
        </footer>
      </main>
    </div>
    <script>
      // Mobile navigation functionality
      function initMobileNav() {
        const navToggle = document.getElementById("navToggle");
        const navMenu = document.getElementById("navMenuMobile");
        const navClose = document.getElementById("navClose");

        function closeMenu() {
          navMenu.classList.remove("open");
        }

        function openMenu() {
          navMenu.classList.add("open");
        }

        if (navToggle && navMenu) {
          navToggle.addEventListener("click", openMenu);

          if (navClose) {
            navClose.addEventListener("click", closeMenu);
          }

          navMenu.addEventListener("click", (e) => {
            if (e.target.tagName === "A") {
              closeMenu();
            }
          });

          document.addEventListener("click", (e) => {
            if (!navToggle.contains(e.target) && !navMenu.contains(e.target)) {
              closeMenu();
            }
          });
        }
      }

      // Show mobile nav header immediately
      const navHeader = document.getElementById("navHeader");
      if (navHeader) {
        navHeader.classList.add("visible");
      }

      // Initialize mobile navigation
      document.addEventListener("DOMContentLoaded", initMobileNav);

      // Read more functionality
      function initReadMore() {
        const readMoreBtn = document.getElementById("readMoreBtn");
        const aboutMore = document.getElementById("aboutMore");

        if (readMoreBtn && aboutMore) {
          readMoreBtn.addEventListener("click", () => {
            const isExpanded = aboutMore.classList.contains("expanded");

            if (isExpanded) {
              aboutMore.classList.remove("expanded");
              readMoreBtn.textContent = "leggi di più";
            } else {
              aboutMore.classList.add("expanded");
              readMoreBtn.textContent = "leggi di meno";
            }
          });
        }
      }

      // Initialize read more functionality
      document.addEventListener("DOMContentLoaded", initReadMore);

      // Carousel functionality
      function initCarousel(id_track, id_left, id_right) {
        const carouselTrack = document.getElementById(id_track);
        const leftArrow = document.getElementById(id_left);
        const rightArrow = document.getElementById(id_right);

        _initCarousel(carouselTrack, leftArrow, rightArrow);
      }

      function _initCarousel(carouselTrack,leftArrow,rightArrow) {

        if (!carouselTrack || !leftArrow || !rightArrow) return;

        let currentIndex = 0;
        const slides = carouselTrack.children;
        const totalSlides = slides.length;

        // Determine slides per view based on screen size
        function getSlidesPerView() {
          return window.innerWidth <= 768 ? 1 : 2;
        }

        function updateCarousel() {
          const slidesPerView = getSlidesPerView();
          const maxIndex = totalSlides - slidesPerView;
          const translateX = -(currentIndex * (100 / slidesPerView));

          carouselTrack.style.transform = `translateX(${translateX}%)`;

          // Update arrow states
          leftArrow.disabled = currentIndex === 0;
          rightArrow.disabled = currentIndex >= maxIndex;
        }

        function moveLeft() {
          if (currentIndex > 0) {
            currentIndex--;
            updateCarousel();
          }
        }

        function moveRight() {
          const slidesPerView = getSlidesPerView();
          const maxIndex = totalSlides - slidesPerView;
          if (currentIndex < maxIndex) {
            currentIndex++;
            updateCarousel();
          }
        }

        leftArrow.addEventListener("click", moveLeft);
        rightArrow.addEventListener("click", moveRight);

        // Handle window resize
        window.addEventListener("resize", () => {
          updateCarousel();
        });

        // Initialize
        updateCarousel();
      }
      // Initialize carousel functionality
      document.addEventListener("DOMContentLoaded", () => {
        initCarousel("carouselTrack", "carouselLeft", "carouselRight");
        initCarousel("coworkingCarouselTrack", "coworkingCarouselLeft", "coworkingCarouselRight");
      });

      // Ink Trail functionality
      function initInkTrail() {
        const inkTrailSvg = document.getElementById("inkTrailSvg");
        const inkTrailPath = document.getElementById("inkTrailPath");

        if (!inkTrailSvg || !inkTrailPath) return;

        let points = [];
        const maxPoints = 100;
        const svgHeight = window.innerHeight;
        const svgWidth = 100;

        function generateBezierPath(points) {
          if (points.length < 2) return "";

          let path = `M ${points[0].x} ${points[0].y}`;

          for (let i = 1; i < points.length; i++) {
            const prev = points[i - 1];
            const curr = points[i];
            const next = points[i + 1] || curr;

            // Calculate smooth control points using adjacent points
            const tension = 0.4;

            // Vector from previous to next point
            const dx = next.x - prev.x;
            const dy = next.y - prev.y;

            // Control points for smoother curves
            const cp1x = prev.x + dx * tension;
            const cp1y = prev.y + dy * tension;
            const cp2x = curr.x - dx * tension;
            const cp2y = curr.y - dy * tension;

            path += ` C ${cp1x} ${cp1y}, ${cp2x} ${cp2y}, ${curr.x} ${curr.y}`;
          }

          return path;
        }

        function updateInkTrail() {
          const scrollPercent =
            window.scrollY /
            (document.documentElement.scrollHeight - window.innerHeight);
          const scrollProgress = Math.min(scrollPercent, 1);

          // Calculate how many points we should have based on scroll
          const targetPoints = Math.floor(scrollProgress * maxPoints);

          // Generate points from start to current scroll position
          points = [];
          for (let i = 0; i <= targetPoints; i++) {
            const progress = i / maxPoints;
            const y = progress * svgHeight;
            const x =
              30 +
              Math.sin(progress * Math.PI * 4) * 20 +
              Math.sin(progress * 10) * 3;
            points.push({ x, y });
          }

          // Generate and apply path
          const pathData = generateBezierPath(points);
          inkTrailPath.setAttribute("d", pathData);
        }

        // Update on scroll
        window.addEventListener("scroll", updateInkTrail);

        // Initial draw
        updateInkTrail();
      }

      // Initialize ink trail functionality
      document.addEventListener("DOMContentLoaded", initInkTrail);

      // Sidebar opacity control
      function initSidebarOpacity() {
        const sidebar = document.querySelector(".sidebar");
        if (!sidebar) return;

        function updateSidebarOpacity() {
          const scrollY = window.scrollY;
          const viewportHeight = window.innerHeight;
          const maxScroll = viewportHeight * 0.5; // 50vh

          // Calculate opacity (0 to 1) based on scroll position
          const opacity = Math.min(scrollY / maxScroll, 1);
          sidebar.style.opacity = opacity;
        }

        // Update on scroll
        window.addEventListener("scroll", updateSidebarOpacity);

        // Initial check
        updateSidebarOpacity();
      }

      // Initialize sidebar opacity functionality
      document.addEventListener("DOMContentLoaded", initSidebarOpacity);

      // Hide sidebar when in contatti section
      function initContattiSectionObserver() {
        const sidebar = document.querySelector('.sidebar');
        const contattiSection = document.getElementById('contatti');
        const footerSection = document.querySelector('.footer-section');
        
        if (!sidebar || !contattiSection) return;

        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting && entry.intersectionRatio > 0.1) {
              sidebar.classList.add('hidden');
            } else {
              // Check if footer is not in view before showing sidebar
              const footerRect = footerSection?.getBoundingClientRect();
              const windowHeight = window.innerHeight;
              
              if (!footerRect || footerRect.top > windowHeight) {
                sidebar.classList.remove('hidden');
              }
            }
          });
        }, {
          threshold: [0.3, 0.7]
        });

        observer.observe(contattiSection);

        // Also observe footer
        if (footerSection) {
          const footerObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                sidebar.classList.add('hidden');
              }
            });
          }, {
            threshold: 0.3
          });
          
          footerObserver.observe(footerSection);
        }
      }

      // Initialize contatti section observer
      document.addEventListener("DOMContentLoaded", initContattiSectionObserver);


      // Archivio Gallery and Modal - Ultra-optimized version
      function initArchivioGallery() {
        const gallery = document.getElementById('archivioGallery');
        const modal = document.getElementById('imageModal');
        const modalImage = document.getElementById('modalImage');
        const modalText = document.getElementById('modalText');
        const modalClose = document.getElementById('modalClose');
        const modalLoader = document.getElementById('modalLoader');

        if (!gallery || !modal) return;
        
        let isModalOpen = false;
        
        // Handle gallery clicks with passive listener
        gallery.addEventListener('click', (e) => {
          if (isModalOpen) return;
          
          const item = e.target.closest('.gallery-item');
          if (!item) return;
          
          e.preventDefault();
          
          // Get data immediately
          const img = item.querySelector('img');
          const src = img.src;
          const caption = item.dataset.caption;
          
          if (!src) return;
          
          isModalOpen = true;
          
          // Show modal and loader immediately (no RAF needed)
          modal.classList.add('active');
          modalLoader.style.display = 'block';
          modalImage.style.display = 'none';
          modalText.textContent = caption;
          document.body.style.overflow = 'hidden';
          
          // Load image
          if (img.complete && img.src === src) {
            // Image already loaded
            modalImage.src = src;
            modalImage.style.display = 'block';
            modalLoader.style.display = 'none';
          } else {
            // Need to load image
            const tempImg = new Image();
            tempImg.onload = () => {
              modalImage.src = src;
              modalImage.style.display = 'block';
              modalLoader.style.display = 'none';
            };
            tempImg.onerror = () => {
              modalImage.src = src;
              modalImage.style.display = 'block';
              modalLoader.style.display = 'none';
            };
            tempImg.src = src;
          }
        }, { passive: false });

        // Close modal function
        function closeModal() {
          if (!isModalOpen) return;
          
          isModalOpen = false;
          modal.classList.remove('active');
          document.body.style.overflow = '';
          
          // Clean up after transition
          setTimeout(() => {
            modalImage.src = '';
            modalImage.style.display = 'none';
            modalLoader.style.display = 'none';
          }, 200);
        }

        // Close button
        modalClose?.addEventListener('click', closeModal, { passive: true });

        // Click outside to close
        modal.addEventListener('click', (e) => {
          if (e.target === modal) closeModal();
        }, { passive: true });

        // Escape key to close
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && isModalOpen) closeModal();
        }, { passive: true });
      }

      // Initialize archivio gallery functionality
      document.addEventListener("DOMContentLoaded", () => {
        initArchivioGallery();
      });

      // Archivio read more functionality
      function initArchivioReadMore() {
        const archivioBtn = document.getElementById('archivioBtn');
        const archivioIntro = document.getElementById('archivioIntro');

        if (archivioBtn && archivioIntro) {
          archivioBtn.addEventListener('click', () => {
            const isExpanded = archivioIntro.classList.contains('expanded');

            if (isExpanded) {
              archivioIntro.classList.remove('expanded');
              archivioBtn.textContent = 'scopri di più';
            } else {
              archivioIntro.classList.add('expanded');
              archivioBtn.textContent = 'scopri di meno';
            }
          });
        }
      }

      // Initialize archivio read more functionality
      document.addEventListener("DOMContentLoaded", initArchivioReadMore);
    </script>
  </body>
</html>
